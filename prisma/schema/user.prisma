// User domain models and enums

model User {
  id                Int       @id @default(autoincrement())
  email             String    @unique
  firstName         String?
  lastName          String?
  password          String?   // Optional for social login users
  role              Role      @default(STUDENT)
  isEmailVerified   Boolean   @default(false)
  emailVerifyToken  String?
  passwordResetToken String?
  passwordResetExpires DateTime?
  googleId          String?   @unique
  profilePicture    String?
  lastLoginAt       DateTime?
  
  // User Preferences
  timezone          String?   @default("UTC")
  
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  // Authentication Relations
  refreshTokens     RefreshToken[]
  sessions          UserSession[]
  
  // Study Relations
  studySessions     StudySession[]
  studyGoals        StudyGoal[]
  
  // Room Relations
  participants      Participant[]
  messages          Message[]
  sessionLogs       SessionLog[]
  
  // Admin & Moderation Relations
  presences                      UserPresence[]
  moderationActionsTarget        ModerationAction[] @relation("ModerationTarget")
  moderationActionsPerformed     ModerationAction[] @relation("ModerationPerformer")
  moderationActionsRevoked       ModerationAction[] @relation("ModerationRevoker")
  auditLogs                      AuditLog[]

  @@map("users")
}

enum Role {
  STUDENT
  SUPER_ADMIN
}